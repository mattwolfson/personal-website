/*! duel v2.5.8 - Built 2016-01-14, 12:01 PM PST - Copyright (c) 2016 */
var $sfContext=null;define("starfield/sf.context",["starfield/sf.base.modal","jq!starfield/jquery.mod","css!starfield/sf.context.css","css!starfield/sf.core.css","domReady!"],function(){return function(a){var b={options:{anchor:void 0,mode:"custom",width:200,positionIdeal:"tl",sticky:!1,fallbackOnFailPosition:"auto",zIndex:void 0,autoOpen:!1,destroyOnClose:!1,closeTimeoutInterval:void 0,closeOnBlur:!0,blurTrigger:"click",singleInstanceOnly:!0,ignoreWindowChanges:!1,centerAgainstAnchor:!1,onOpen:void 0,onClose:void 0,onItemClick:void 0,onTabSelected:void 0,onTabDeselected:void 0,onContextMenu:void 0,context:self,displayContext:self},_create:function(){this._mode=this._deriveMode(),this._width=this.options.width>200?this.options.width:200,this._initParent=this.element.parent(),this._initHasParent=this._initParent.length>0,this._ctxt=$sf.util.context(this.options.context,this.options.displayContext),this._setUpAnchor(),this._formatContent(),this._initFlyout()},_formatContent:function(){var b=this,c=b.element;c.addClass(b.baseClass);var d={tabsFormat:function(){},listFormat:function(){var b=c.find("ul").addClass("sf-menu").find("li").each(function(){var b=a(this);d.fixLIs(b),b.attr("data-icon")&&""!==b.attr("data-icon")&&b.children("a").prepend('<span class="sf-menu-icn '+b.attr("data-icon")+'"></span>')}).end();b.children("li[data-icon]").length>0&&b.addClass("sf-menu-icns")},searchFormat:function(){c.find("li").each(function(){d.fixLIs(a(this))});var e=c.find("input:not([data-configured])");if(e.length>0){e.addClass("sf-search");var f=e.outerWidth(!0)-e.width();e.width(b._width-f).attr("data-configured",!0)}},customFormat:function(){},fixLIs:function(d){d.attr("data-configured")||(d.addClass("sf-menu-li").attr,d.attr("id",b._generateId("sfcontextitem")),d.children("a").length<=0&&d.wrapInner('<a class="sf-menu-a"></a>'),d.children("a").attr("href","javascript: void(0);").attr("onClick","return false;"),d.bind("click",function(){var e=!0;a.isFunction(b.options.onItemClick)&&(e=b.options.onItemClick(c,d.index(),d),"undefined"==typeof e&&(e=!0)),e!==!1&&b.close()}).attr("data-configured",!0))}};d[b._mode+"Format"]()},_setUpAnchor:function(){function b(b){c._anchor.css({top:b.pageY+"px",left:b.pageX+"px"});var e=a.isFunction(d.onContextMenu)?d.onContextMenu(c.element,b):!0;return"undefined"==typeof e&&(proceed=!0),e&&(c.isOpen()?c.reposition():c.open()),b.returnValue=!e,!e}var c=this,d=c.options;"cursor"===d.anchor?(c._anchor=a("<div />").css({width:"1px",height:"1px",position:"absolute"}).appendTo(this._ctxt.ext.body()),c._anchorIsCursor=!0,a(this._ctxt.intr.body()).bind("contextmenu.sfctxt",b),this._ctxt.isSingle()||a(this._ctxt.ext.body()).bind("contextmenu.sfctxt",b)):c._anchor=a(d.anchor).eq(0),c._anchor.addClass(c.baseClass+"-anchor")},_initFlyout:function(){var b=this,c=b.options,d=b.element;require("starfield/sf.flyout",function(){var e={mode:"tip",anchor:b._anchor,autoOpen:c.autoOpen,dialogWidthIdeal:b._width,destroyOnClose:!1,tipPosition:c.positionIdeal,sticky:c.sticky,fallbackOnFailPosition:c.fallbackOnFailPosition,boxShadowAdjustment:5,dialogBoxShadowAdjustment:5,closeOnBlur:c.closeOnBlur,blurTrigger:c.blurTrigger,zIndex:c.zIndex,client:"sf-context",className:"sf-context-mode-"+b._mode,singleClientInstance:c.singleInstanceOnly,ignoreWindowChanges:c.ignoreWindowChanges,closeTimeoutInterval:c.closeTimeoutInterval,centerAgainstAnchor:c.centerAgainstAnchor,onOpen:function(){a.isFunction(c.onOpen)&&c.onOpen(d)},onClose:function(){var e=!0;return a.isFunction(c.onClose)&&(e=c.onClose(d)),e&&c.destroyOnClose&&setTimeout(function(){b.destroy()},10),e},onTabSelected:c.onTabSelected,onTabDeselected:c.onTabDeselected};"tabs"===b._mode&&(e.tabMode="toggle"),d.sfFlyout(e)})},_deriveMode:function(){var a=this.element,b=""===a.attr("data-mode")?void 0:a.attr("data-mode");return b=b?b:this.options.mode,"tabs"!==b&&this.element.find(".sf-tab-content").length>0&&(b="tabs"),"list"!==b&&this.element.find("li[data-icon]").length>0&&(b="list"),void 0===b&&(b="custom"),b},destroy:function(b){this.isOpen()&&this.close(!0),this.element.sfFlyout&&(this._initHasParent&&this.element.hide().appendTo(this._initParent),this.element.sfFlyout("destroynow")),this.element.removeClass(this.baseClass),this._anchor.removeClass(this.baseClass+"-anchor"),this._anchorIsCursor&&(this._anchor.remove(),a(this._ctxt.intr.body()).unbind("contextmenu.sfctxt"),this._ctxt.isSingle()||a(this._ctxt.ext.body()).unbind("contextmenu.sfctxt"));var c=this;this._initHasParent?this._execSuper("destroy",b):setTimeout(function(){c.element.appendTo(a(c._ctxt.intr.body())),c.element.remove(),c._execSuper("destroy",b)},100)},reformatContent:function(){this._formatContent()},open:function(){var a=this;require("starfield/sf.flyout",function(){if(!a.isOpen()){var b=a.element;b.is(":sf-flyout")&&b.sfFlyout("open")}})},close:function(a){var b=this,c=this.element;require("starfield/sf.flyout",function(){c.is(":sf-flyout")&&c.sfFlyout(b.options.destroyOnClose===!0||a===!0?"closeNow":"close")})},enable:function(){var a=this.element;require("starfield/sf.flyout",function(){a.is(":sf-flyout")&&a.sfFlyout("enable")})},disable:function(){var a=this.element;require("starfield/sf.flyout",function(){a.is(":sf-flyout")&&a.sfFlyout("diable")})},toggle:function(){this.isOpen()?this.close():this.open()},getFlyout:function(){var a=this,b=null;return require("starfield/sf.flyout",function(){a.element.is(":sf-flyout")&&(b=a.element.parents(".sf-flyout"))}),b},reposition:function(){var a=this;require("starfield/sf.flyout",function(){a.element.is(":sf-flyout")&&a.element.sfFlyout("resize")})},selectTab:function(a){var b=this;require("starfield/sf.flyout",function(){b.element.is(":sf-flyout")&&(ret=b.element.sfFlyout("selectTab",a))})},setCloseOnBlur:function(b){a.isPlainObject(b)&&(b=b.close),require("starfield/sf.flyout",function(){$m.element.is(":sf-flyout")&&$m.element.sfFlyout("setCloseOnBlur",b)})},isOpen:function(){var a=this.element,b=!1;return require("starfield/sf.flyout",function(){a.is(":sf-flyout")&&(b=a.sfFlyout("isOpen"))}),b},content:function(){return this.element},anchor:function(){return this._anchor}};return $sf.util.selector("sf-context",{root:{selector:".sf-context",tests:{id:function(a,b){return a.attr("id")===b}},states:{open:function(a){return a.sfContext("isOpen")},closed:function(a){return!a.sfContext("isOpen")}}},anchor:{selector:".sf-context-anchor",tests:{id:function(a,b){return a.attr("data-flyout")===b}}}}),$sf.util.module("Context",b)}($sf.getjQuery())});